$(function() {

    // {{--  ブッキングコントローラー特定の日付用  --}}1
    bookingController.forEach(function(item, index) {
      var dayOfTheWeek = item.day_of_the_week;
      for (var i = 0; i < document.Form.length - 1; i++) {
        var placeholder = $('form[name="Form"] input').eq(i).attr("placeholder");
        if (Math.floor(placeholder / 10000) == dayOfTheWeek) {
          $('form[name="Form"] input').eq(i).val("×");
          $('form[name="Form"] input').eq(i).attr('disabled', true);
        }
      }
    })
    // {{--  ブッキングコントローラー特定の時間帯用  --}}
    bookingController2.forEach(function(item, index) {
      var dayTime = item.day_time;
      for (var i = 0; i < document.Form.length - 1; i++) {
        var placeholder = $('form[name="Form"] input').eq(i).attr("placeholder");
        if (placeholder == dayTime) {
            for (var l = 0; l < 16; l += 1) {
                if ($('form[name="Form"] #length_of_time').val() === 1 + 0.5 * l + '時間') {
                  for (var j = 0; j < 14 * l + 15; j += 14) {
                    $('form[name="Form"] input').eq(i - j).val("×");
                    $('form[name="Form"] input').eq(i - j).attr('disabled', true);
                  }
                } else {
                  $('form[name="Form"] input').eq(i).val("×");
                  $('form[name="Form"] input').eq(i).attr('disabled', true);
                }
            }
        }
      }
    })
    // {{--  既存の予約用  --}}
    booking.forEach(function(item, index) {
      var bookingDate = item.booking_date_number;
      var time = item.length_of_time;
      for (var i = 0; i < document.Form.length - 1; i++) {
        if ($('form[name="Form"] input').eq(i).attr("placeholder") == bookingDate) {
          $('form[name="Form"] input').eq(i).prop("name", time)
          for (var l = 0; l < 16; l += 1) {
            if ($('form[name="Form"] input').eq(i).attr('name') === 1 + 0.5 * l + '時間') {
              for (var j = 0; j < 14 * l + 15; j += 14) {
                $('form[name="Form"] input').eq(i + j).val("×");
                $('form[name="Form"] input').eq(i + j).attr('disabled', true);
              }
            } else {
              $('form[name="Form"] input').eq(i).val("×");
              $('form[name="Form"] input').eq(i).attr('disabled', true);
            }
          }
          for (var l = 0; l < 16; l += 1) {
            if ($('form[name="Form"] #length_of_time').val() === 1 + 0.5 * l + '時間') {
              for (var j = 0; j < 14 * l + 15; j += 14) {
                $('form[name="Form"] input').eq(i - j).val("×");
                $('form[name="Form"] input').eq(i - j).attr('disabled', true);
              }
              if($('form[name="Form"] input').eq(266).val() !== "〇" && $('form[name="Form"] input').eq(266).val() !== "×"){
                for (var k = 252-14*l; k < 266; k++) {
                    $('form[name="Form"] input').eq(k).val("×");
                    $('form[name="Form"] input').eq(k).attr('disabled', true);
                  }
              }
            } else {
              $('form[name="Form"] input').eq(i).val("×");
              $('form[name="Form"] input').eq(i).attr('disabled', true);
            }
        }
        }
      }
    })
  })
  $(function() {
    // {{--  ブッキングコントローラー特定の日付用  --}}
    bookingController.forEach(function(item, index) {
      var dayOfTheWeek = item.day_of_the_week;
      for (var i = 0; i < document.Form2.length - 1; i++) {
        var placeholder = $('form[name="Form2"] input').eq(i).attr("placeholder");
        if (Math.floor(placeholder / 10000) == dayOfTheWeek) {
          $('form[name="Form2"] input').eq(i).val("×");
          $('form[name="Form2"] input').eq(i).attr('disabled', true);
        }
      }
    })
    // {{--  ブッキングコントローラー特定の時間帯用  --}}
    bookingController2.forEach(function(item, index) {
      var dayTime = item.day_time;
      for (var i = 0; i < document.Form2.length - 1; i++) {
        var placeholder = $('form[name="Form2"] input').eq(i).attr("placeholder");
        if (placeholder == dayTime) {
            for (var l = 0; l < 16; l += 1) {
                if ($('form[name="Form2"] #length_of_time').val() === 1 + 0.5 * l + '時間') {
                  for (var j = 0; j < 14 * l + 15; j += 14) {
                    $('form[name="Form2"] input').eq(i - j).val("×");
                    $('form[name="Form2"] input').eq(i - j).attr('disabled', true);
                  }
                } else {
                  $('form[name="Form2"] input').eq(i).val("×");
                  $('form[name="Form2"] input').eq(i).attr('disabled', true);
                }
            }
        }
      }
    })
    // {{--  既存の予約用  --}}
    booking.forEach(function(item, index) {
      var bookingDate = item.booking_date_number;
      var time = item.length_of_time;
      for (var i = 0; i < document.Form2.length - 1; i++) {
        if ($('form[name="Form2"] input').eq(i).attr("placeholder") == bookingDate) {
          $('form[name="Form2"] input').eq(i).prop("name", time)
          for (var l = 0; l < 16; l += 1) {
            if ($('form[name="Form2"] input').eq(i).attr('name') === 1 + 0.5 * l + '時間') {
              for (var j = 0; j < 14 * l + 15; j += 14) {
                $('form[name="Form2"] input').eq(i + j).val("×");
                $('form[name="Form2"] input').eq(i + j).attr('disabled', true);
              }
            } else {
              $('form[name="Form2"] input').eq(i).val("×");
              $('form[name="Form2"] input').eq(i).attr('disabled', true);
            }
          }
          for (var l = 0; l < 16; l += 1) {
            if ($('form[name="Form2"] #length_of_time').val() === 1 + 0.5 * l + '時間') {
              for (var j = 0; j < 14 * l + 15; j += 14) {
                $('form[name="Form2"] input').eq(i - j).val("×");
                $('form[name="Form2"] input').eq(i - j).attr('disabled', true);
              }
              if($('form[name="Form2"] input').eq(266).val() !== "〇" && $('form[name="Form2"] input').eq(266).val() !== "×"){
                for (var k = 252-14*l; k < 266; k++) {
                    $('form[name="Form2"] input').eq(k).val("×");
                    $('form[name="Form2"] input').eq(k).attr('disabled', true);
                  }
              }
            } else {
              $('form[name="Form2"] input').eq(i).val("×");
              $('form[name="Form2"] input').eq(i).attr('disabled', true);
            }
        }
        }
      }
    })
  })
  // ↓カレンダー値別カラー↓
  $(function() {
    $('#tabBox1 input[value="×"]').css({
      'color': '#696969',
      'font-weight': '600'
    });
    $('#tabBox1 input[value="〇"]').css({
      'color': '#4b9dd8;',
      'font-weight': '600'
    });
    $('#tabBox2 input[value="×"]').css({
      'color': '#696969',
      'font-weight': '600'
    });
    $('#tabBox2 input[value="〇"]').css({
      'color': '#d84b6a',
      'font-weight': '600'
    });

  });
  // ↑カレンダー値別カラー↑
  $(document).ready(function() {
    if (matchMedia('(max-width: 960px)').matches) {
      $('.global-nav__list').removeClass('delete');
      $('#media').show();
      $('.nav1').addClass('delete');
      $('.header li').removeClass('p-3');
    }
  });
  //   ↓タブレット、スマホとPCのリンク先を変更↓
  $(document).ready(function() {
    if (matchMedia('(max-width: 960px)').matches) {
      $('#booking-btn-1').addClass('delete');
      $('#booking-btn-4').addClass('delete');
    } else {
      $('#booking-btn-2').addClass('delete');
      $('#booking-btn-5').addClass('delete');
    }
  });
  //   ↑タブレット、スマホとPCのリンク先を変更↑
  $(document).ready(function() {
    if (matchMedia('(max-width: 960px)').matches) {
      $('#footer-pc').addClass('delete');
    } else {
      $('#footer-sm').addClass('delete');
    }
  });
  $(window).scroll(function() {
    // ↓スクロールで吹き出しが出るタイミング↓
    if ($(window).scrollTop() >= 200 && matchMedia('(max-width: 960px)').matches) {
      $('.balloon').removeClass('delete');
      $('.balloon').show(3000);
    }
    if ($(window).scrollTop() <= 500 && matchMedia('(max-width: 960px)').matches) {
      $('.balloon').removeClass('delete');
      $('.balloon').show(3000);
    }
    if (($(window).scrollTop() < 200 || $(window).scrollTop() > 500)) {
      $('.balloon').addClass('delete');
    }
    // ↑スクロールで吹き出しが出るタイミング↑
    //  ↓予約ボタンが定位置に戻るタイミング↓
    if ($(window).scrollTop() >= 900) {
      $('.booking-btn-container').css('position', 'static');
    }
    if ($(window).scrollTop() < 900) {
      $('.booking-btn-container').css('position', 'fixed');
    }
  });
  //    ↑予約ボタンが定位置に戻るタイミング↑
  // ↓ドロワー↓
  function toggleNav() {
    var body = document.body;
    var hamburger = document.getElementById('js-hamburger');
    var blackBg = document.getElementById('js-black-bg');
    hamburger.addEventListener('click', function() {
      body.classList.toggle('nav-open');
    });
    blackBg.addEventListener('click', function() {
      body.classList.remove('nav-open');
    });
  }
  toggleNav();
  //   ↑ドロワー↑
  //   ↓トグルスイッチ↓
  $(function() {
    $("#tabMenu li a").on("click", function() {
      $("#tabBoxes div").hide();
      $($(this).attr("href")).fadeToggle();
    });
    return false;
  });
  $(function() {
    $(".toggle-input").on("click", function() {
      if ($(".toggle-input").prop("checked") == true) {
        $("#tabBoxes div").hide();
        $($(".woman").attr("href")).fadeToggle();
      } else {
        $("#tabBoxes div").hide();
        $($(".man").attr("href")).fadeToggle();
      }
    });
    return false;
  });
  // ↑トグルスイッチ↑
  // ↓男性女性の名前をクリックしたときもトグルスイッチが動く設定↓
  $(function() {
    $(".woman").on("click", function() {
      $('input[type="checkbox"]').prop('checked', true);
    });
  });
  $(function() {
    $(".man").on("click", function() {
      $('input[type="checkbox"]').prop('checked', false);
    });
  });
  // ↑男性女性の名前をクリックしたときもトグルスイッチが動く設定↑
  
